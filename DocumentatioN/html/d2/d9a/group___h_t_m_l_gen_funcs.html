<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Layer Build Report Generator: HTML Generation Functions</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">Layer Build Report Generator<span id="projectnumber">&#160;1</span>
   </div>
   <div id="projectbrief">This is an app which can automate generation of reports for WMM and DBM road bitumen quality tests.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="../../menudata.js"></script>
<script type="text/javascript" src="../../menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('../../',true,false,'search.php','Search');
  $(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
</div><!-- top -->
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

<div class="header">
  <div class="summary">
<a href="#func-members">Functions</a> &#124;
<a href="#pri-slot-members">Private Slots</a>  </div>
  <div class="headertitle"><div class="title">HTML Generation Functions</div></div>
</div><!--header-->
<div class="contents">

<p>These functions generate HTML reports.  
<a href="#details">More...</a></p>
<table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="func-members" name="func-members"></a>
Functions</h2></td></tr>
<tr class="memitem:gaf75f23e18bcd9434f51025bbfd128e4c" id="r_gaf75f23e18bcd9434f51025bbfd128e4c"><td class="memItemLeft" align="right" valign="top"><a id="gaf75f23e18bcd9434f51025bbfd128e4c" name="gaf75f23e18bcd9434f51025bbfd128e4c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>MainWindow::generate_html_spc</b> ()</td></tr>
<tr class="separator:gaf75f23e18bcd9434f51025bbfd128e4c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga4004c909b1ad549c1f57d7a45cfb7b0d" id="r_ga4004c909b1ad549c1f57d7a45cfb7b0d"><td class="memItemLeft" align="right" valign="top"><a id="ga4004c909b1ad549c1f57d7a45cfb7b0d" name="ga4004c909b1ad549c1f57d7a45cfb7b0d"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>MainWindow::generate_html_grad</b> ()</td></tr>
<tr class="separator:ga4004c909b1ad549c1f57d7a45cfb7b0d"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga230f8b77b3a2912aa494011a65c4ecd2" id="r_ga230f8b77b3a2912aa494011a65c4ecd2"><td class="memItemLeft" align="right" valign="top"><a id="ga230f8b77b3a2912aa494011a65c4ecd2" name="ga230f8b77b3a2912aa494011a65c4ecd2"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>MainWindow::generate_html_tensile</b> ()</td></tr>
<tr class="separator:ga230f8b77b3a2912aa494011a65c4ecd2"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga2824200358f895a6062e2ebb0e6680f4" id="r_ga2824200358f895a6062e2ebb0e6680f4"><td class="memItemLeft" align="right" valign="top"><a id="ga2824200358f895a6062e2ebb0e6680f4" name="ga2824200358f895a6062e2ebb0e6680f4"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>MainWindow::generate_html_marshall</b> ()</td></tr>
<tr class="separator:ga2824200358f895a6062e2ebb0e6680f4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga18067c707bfae5bab17153ddb5b45bc8" id="r_ga18067c707bfae5bab17153ddb5b45bc8"><td class="memItemLeft" align="right" valign="top"><a id="ga18067c707bfae5bab17153ddb5b45bc8" name="ga18067c707bfae5bab17153ddb5b45bc8"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>MainWindow::generate_html_vol</b> ()</td></tr>
<tr class="separator:ga18067c707bfae5bab17153ddb5b45bc8"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gaf9b8272667a9b03cfd908e9a0cc1a7d4" id="r_gaf9b8272667a9b03cfd908e9a0cc1a7d4"><td class="memItemLeft" align="right" valign="top"><a id="gaf9b8272667a9b03cfd908e9a0cc1a7d4" name="gaf9b8272667a9b03cfd908e9a0cc1a7d4"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>MainWindow::generate_html_gmm</b> ()</td></tr>
<tr class="separator:gaf9b8272667a9b03cfd908e9a0cc1a7d4"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga26a69266d11871bd4f9976a0072fe503" id="r_ga26a69266d11871bd4f9976a0072fe503"><td class="memItemLeft" align="right" valign="top"><a id="ga26a69266d11871bd4f9976a0072fe503" name="ga26a69266d11871bd4f9976a0072fe503"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>MainWindow::generate_html_rheology</b> ()</td></tr>
<tr class="separator:ga26a69266d11871bd4f9976a0072fe503"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:gab1ec5b2a56c6e0d1bcfbfff661bb1e4e" id="r_gab1ec5b2a56c6e0d1bcfbfff661bb1e4e"><td class="memItemLeft" align="right" valign="top"><a id="gab1ec5b2a56c6e0d1bcfbfff661bb1e4e" name="gab1ec5b2a56c6e0d1bcfbfff661bb1e4e"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>MainWindow::generate_html_wa</b> ()</td></tr>
<tr class="separator:gab1ec5b2a56c6e0d1bcfbfff661bb1e4e"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table><table class="memberdecls">
<tr class="heading"><td colspan="2"><h2 class="groupheader"><a id="pri-slot-members" name="pri-slot-members"></a>
Private Slots</h2></td></tr>
<tr class="memitem:gafed7cf732ce8ea45482f1c1c428fde0c" id="r_gafed7cf732ce8ea45482f1c1c428fde0c"><td class="memItemLeft" align="right" valign="top"><a id="gafed7cf732ce8ea45482f1c1c428fde0c" name="gafed7cf732ce8ea45482f1c1c428fde0c"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>MainWindow::generate_html_fei</b> ()</td></tr>
<tr class="separator:gafed7cf732ce8ea45482f1c1c428fde0c"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga7924460ee2db92f8c0b0b585c02d710f" id="r_ga7924460ee2db92f8c0b0b585c02d710f"><td class="memItemLeft" align="right" valign="top"><a id="ga7924460ee2db92f8c0b0b585c02d710f" name="ga7924460ee2db92f8c0b0b585c02d710f"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>MainWindow::generate_html_aiv</b> ()</td></tr>
<tr class="separator:ga7924460ee2db92f8c0b0b585c02d710f"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga23e134b2152f417ddee5f3cda4937906" id="r_ga23e134b2152f417ddee5f3cda4937906"><td class="memItemLeft" align="right" valign="top"><a id="ga23e134b2152f417ddee5f3cda4937906" name="ga23e134b2152f417ddee5f3cda4937906"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>MainWindow::generate_html_ind</b> ()</td></tr>
<tr class="separator:ga23e134b2152f417ddee5f3cda4937906"><td class="memSeparator" colspan="2">&#160;</td></tr>
<tr class="memitem:ga72730441f5ffce87f6a7f1a5394348da" id="r_ga72730441f5ffce87f6a7f1a5394348da"><td class="memItemLeft" align="right" valign="top"><a id="ga72730441f5ffce87f6a7f1a5394348da" name="ga72730441f5ffce87f6a7f1a5394348da"></a>
void&#160;</td><td class="memItemRight" valign="bottom"><b>MainWindow::generate_html_mdd</b> ()</td></tr>
<tr class="separator:ga72730441f5ffce87f6a7f1a5394348da"><td class="memSeparator" colspan="2">&#160;</td></tr>
</table>
<a name="details" id="details"></a><h2 class="groupheader">Detailed Description</h2>
<p>These functions generate HTML reports. </p>
<p>2 elements are used to generate the HTML reports.</p><ul>
<li><p class="startli">HTML Template All the possible pages of the report are stored in the road_test_report_generator/templates folder as .html files which are read by the Qt system as .qrc files These templates contain tokens in the form of <code>~1~</code> where 1 can be replaced by any number. These tokens are parsed by the generate_html_functions as placeholders which are replaced by appropriate values.</p>
<p class="startli">For example, if a line needs to contain an average value of penetration it would look like </p><div class="fragment"><div class="line">html</div>
<div class="line"> &lt;tr&gt;</div>
<div class="line">    &lt;th&gt; Average Value: &lt;/th&gt;</div>
<div class="line">    &lt;td&gt; ~42~ &lt;/th&gt;</div>
<div class="line"> &lt;/tr&gt;</div>
</div><!-- fragment --><p> So when parsing, the generate_html_exp function will read the rest of the values as text, however it will read ~42~ as a token. It will look into the JSON objects for the respective experiment and replace the token 42 with the appropriate value.</p>
</li>
<li><p class="startli">JSON Database To generate HTML, the token from templates are cross referenced with values from JSON file. This is handled by switch statements or if-else repeated statements. In the earlier templates, like spc, fei, aiv, the switch case system is evaluated individually for all cases. This is very time consuming for the developers, so soon we developed a new method where some mathematical function (like mod %) is applied on the token to get a key from the JSON file.</p>
<p class="startli">We have decided to use the QFile system for reading files like JSON and HTML template and use the standard c++ file system for output because thats what we found the best option for either. If you find that another file I/O method is best you are free to use it.</p>
<p class="startli">Here is how the general flow of html generation is made:<br  />
 1) First JSON file is opened with QFile system and loaded into a QJsonObject <br  />
 2) Then output file stream is opened with std::ofstream <br  />
 3) Within the ofstream window, the template HTML file is opened using the q resource system, and loaded into a QTextStream <br  />
 4) The template is read line by line as a cstring (character array) <br  />
 5) Every line is parsed char by char, and if a char is not a token marker '~', then it is transferred directly to the output stream <br  />
 6) If a char is a token marker '~', then the internal logic is applied, this functions by firstly a token extraction tool which finds the numerical value of a token from its string representation. <br  />
 7) After the value of a token is attained then the aforementioned switch case logic is applied on the token to find out which value from the JSON is to be appended on the output file stream. <br  />
 </p><dl class="section note"><dt>Note</dt><dd>In experiments where multiple PDF pages need to be generated, ofstreams are opened one by one as multiple ofstreams can not be opened simultaeneously. So, ofstreams are handled either iteratively or manually for the different experiment pages. </dd></dl>
</li>
</ul>
</div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>
